import{S as I,j as u,A,s as v,a as E,t as H}from"./index-DTTkVZvB.js";import{r as i}from"./react-core-CLwr57uy.js";import{C as l,R as L,p as j}from"./semi-ui-BHzOf8tD.js";import{m as f}from"./tools-Bia2vmZV.js";import"./react-components-B0-Ya59j.js";import"./semantic-7HezVohW.js";const W=()=>{var F,h,m,d,p,x,g,C;const[e]=i.useContext(I),[B,D]=i.useState(!1),[o,a]=i.useState(""),_=async()=>{const r=await A.get("/api/notice"),{success:s,message:c,data:t}=r.data;if(s){let n=localStorage.getItem("notice");if(t!==n&&t!==""){const b=f(t);v(b,!0),localStorage.setItem("notice",t)}}else E(c)},w=async()=>{a(localStorage.getItem("home_page_content")||"");const r=await A.get("/api/home_page_content"),{success:s,message:c,data:t}=r.data;if(s){let n=t;t.startsWith("https://")||(n=f.parse(t)),a(n),localStorage.setItem("home_page_content",n)}else E(c),a("加载首页内容失败...");D(!0)},y=()=>{var s;const r=(s=e==null?void 0:e.status)==null?void 0:s.start_time;return e.status?H(r):""};return i.useEffect(()=>{_().then(),w().then()},[]),u.jsx(u.Fragment,{children:B&&o===""?u.jsx(u.Fragment,{children:u.jsx(l,{bordered:!1,headerLine:!1,title:"系统状况",bodyStyle:{padding:"10px 20px"},children:u.jsxs(L,{gutter:16,children:[u.jsx(j,{span:12,children:u.jsxs(l,{title:"系统信息",headerExtraContent:u.jsx("span",{style:{fontSize:"12px",color:"var(--semi-color-text-1)"},children:"系统信息总览"}),children:[u.jsxs("p",{children:["名称：",(F=e==null?void 0:e.status)==null?void 0:F.system_name]}),u.jsxs("p",{children:["版本：",(h=e==null?void 0:e.status)!=null&&h.version?(m=e==null?void 0:e.status)==null?void 0:m.version:"unknown"]}),u.jsxs("p",{children:["源码：",u.jsx("a",{href:"https://github.com/Calcium-Ion/new-api",target:"_blank",rel:"noreferrer",children:"https://github.com/Calcium-Ion/new-api"})]}),u.jsxs("p",{children:["协议：",u.jsx("a",{href:"https://www.apache.org/licenses/LICENSE-2.0",target:"_blank",rel:"noreferrer",children:"Apache-2.0 License"})]}),u.jsxs("p",{children:["启动时间：",y()]})]})}),u.jsx(j,{span:12,children:u.jsxs(l,{title:"系统配置",headerExtraContent:u.jsx("span",{style:{fontSize:"12px",color:"var(--semi-color-text-1)"},children:"系统配置总览"}),children:[u.jsxs("p",{children:["邮箱验证：",((d=e==null?void 0:e.status)==null?void 0:d.email_verification)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["GitHub 身份验证：",((p=e==null?void 0:e.status)==null?void 0:p.github_oauth)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["微信身份验证：",((x=e==null?void 0:e.status)==null?void 0:x.wechat_login)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["Turnstile 用户校验：",((g=e==null?void 0:e.status)==null?void 0:g.turnstile_check)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["Telegram 身份验证：",((C=e==null?void 0:e.status)==null?void 0:C.telegram_oauth)===!0?"已启用":"未启用"]})]})})]})})}):u.jsx(u.Fragment,{children:o.startsWith("https://")?u.jsx("iframe",{src:o,style:{width:"100%",height:"100vh",border:"none"}}):u.jsx("div",{style:{fontSize:"larger"},dangerouslySetInnerHTML:{__html:o}})})})};export{W as default};
